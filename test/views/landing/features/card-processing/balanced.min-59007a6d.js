!function(a){function b(a,b){$(a).one("inview",function(c,d){d&&$(a).addClass(b)})}function c(){var a=$(window).width();a>960?$(".background-image").css("background-size",a):$(".background-image").css("background-size","auto 510px")}a.balanced={menu:function(){$(".toggle-child-menu, .sidebar-child-menu-left .icon-x").click(function(a){a.preventDefault(),$("body, html").css("overflow-x","hidden"),$(".sidebar-child-menu-left ul").not("#sidebar-child-menu-left-product").css("display","none"),$("#sidebar-child-menu-left-product").css("display","block"),$(".global-wrapper, .sidebar-child-menu-left").toggleClass("expanded")});var a=$("#menu"),b=$("#mobile-menu"),d=$(".has-submenu > a");b.click(function(c){c.preventDefault(),b.toggleClass("active"),a.toggleClass("active")}),$(document.body).on("click touchstart touchmove",function(c){var d=$(c.target);d.is(".site-nav")||d.parents().filter(".site-nav").length>0||(b.removeClass("active"),a.removeClass("active"))}),d.click(function(a){a.preventDefault();var b=$(this);b.toggleClass("active").next("ul").toggleClass("active")}),c(),$(window).resize(c)},carousel:function(){$.fn.carousel&&$(".carousel").carousel({interval:!1});$(".step-boxes a").on("click",function(a){var b=parseInt($(a.currentTarget).find(".box").attr("data-step"),10);b&&$(".carousel").carousel(b-1)}),$(".carousel").on("slid",function(){var a=parseInt($(".carousel-inner .item.active").attr("data-step"),10);a&&($(".how-it-works .step-boxes .box").removeClass("box-active"),$(".how-it-works .step-boxes [data-step="+a+"]").addClass("box-active"))})},customers:function(){$(".customer-wall .masonry").isotope({itemSelector:".customer-card",sortBy:"random"}),$(".customer-wall-header .nav li").on("click",function(a){a.preventDefault();var b=$(this),c=b.attr("data-filter");$(".customer-wall .masonry").isotope(c?{filter:"."+c}:{filter:"*"}),b.addClass("selected").siblings().removeClass("selected")}),$.each(testimonials,function(a,b){var c=new Image;c.src=b.background;var d=new Image;d.src=b.thumb;var e=new Image;e.src=b.logo}),$(".video-testimonial-image .watch-video").on("click",function(a){a.preventDefault();var b=$(".video-testimonial-image");b.addClass("video-playing");var c=b.find(".thumb-container .thumb.selected"),d=c.attr("id"),e=$(".video-modal iframe").attr("src","//www.youtube.com/embed/"+testimonials[d].ytVideoId+"?rel=0");$(".video-modal").modal("show").off("hide.balanced").on("hide.balanced",function(){b.removeClass("video-playing"),e.attr("src","")})}),$(".video-testimonial-image .thumb-container .thumb").on("click",function(a){a.preventDefault();var b=$(this);if(!b.hasClass("selected")){var c=b.attr("id");if(testimonials[c]){var d=testimonials[c],e=$(".video-testimonial-image"),f=e.find(".background-image:hidden");0===f.length&&(f=$(".video-testimonial-image .second")),f.css({"background-image":"url("+d.background+")","z-index":"-1"}).fadeIn("slow",function(){$(this).siblings(".background-image").hide(),$(this).css("z-index","-2")});var g=e.find(".banner");g.find(".banner-content-text").html(d.description),g.find(".banner-logo img").attr("src",d.logo),g.find(".banner-video-thumbnail img").attr("src",d.thumb),b.addClass("selected").siblings().removeClass("selected")}}})},openCompany:function(){var a=0,b=0,c=function(b){var c=b;c=c.sort(function(a,b){return b.watchers_count-a.watchers_count});for(var e=0,f=c.length;f>e;e++)if(!c[e].fork){a++,$.ajax({url:c[e].contributors_url+"?client_id=bda58293b5d9ede74ab7&client_secret=62cfb784097a180bcb5169d9528a23538340ecf0",dataType:"json",crossDomain:!0,timeout:5e3,cache:!1,data:{per_page:100},success:d});var g=$("section.github .repos .repos-container .repo-template").clone().removeClass("repo-template");0===e&&g.addClass("first"),g.find("p.name a").attr("href",c[e].html_url).html(c[e].name),g.find("p.description").html(c[e].description),g.find("p.lang").html(c[e].language),g.find("p.stars span").html(c[e].watchers_count),$("section.github .repos .repos-container").append(g)}$("section.github .repos .loading").css("display","none"),$("section.github .repos .counts h1").html(a)},d=function(c){b++;for(var d=c,e=0;e<d.length;e++)if(0===$("section.github .contributors .contributors-container #"+d[e].id).length){var f=d[e].id,g=d[e].login,h=d[e].html_url,i=d[e].avatar_url,j=$("section.github .contributors .contributors-container .contributor-template").clone().removeClass("contributor-template");j.attr("id",f),j.find("a").attr("href",h),j.find("img.avatar").attr("src",i).attr("alt",g),j.find("p.user").html(g),$("section.github .contributors .contributors-container").append(j)}if(b===a){var k=$("section.github .contributors .contributors-container .contributor").not(".contributor-template").length;$("section.github .contributors .loading").css("display","none"),$("section.github .contributors .counts h1").html(k)}};$.ajax({url:"https://api.github.com/orgs/balanced/repos?client_id=bda58293b5d9ede74ab7&client_secret=62cfb784097a180bcb5169d9528a23538340ecf0",dataType:"json",crossDomain:!0,timeout:5e3,cache:!1,data:{per_page:100},success:c})},accountReconciliation:function(){b(".folded-box","slide-up")},payouts:function(){function a(a,b){return a&&a.length&&9===a.length?void $.ajax({url:"https://js.balancedpayments.com/v1/bank_accounts/routing_numbers/"+a,dataType:"json",success:function(a){return b(a)},error:function(){return b()}}):b()}function c(a){e.addClass("success").removeClass("error").find(".bank-name span").html(a.customer_name)}function d(){e.addClass("error").removeClass("success").find(".bank-name span").html("Invalid routing number. Please enter a valid 9-digit routing number.")}b(".folded-box","slide-up");var e=$(".routing-number"),f=e.find("input");f.on("blur",function(){var b=f.val();a(b,function(a){a?c(a):d()})}),f.on("keyup",function(){var b=f.val();a(b,function(a){a?c(a):e.removeClass("success")})})},pricing:function(){var a=function(){var a=$(".calculator form input[name='estimatedVolume']").val();if(a=parseInt(a.replace(/[^\d\.]/g,""),10),isNaN(a))return $(".effective-rate-value").text(""),"";var b=.029*Math.min(a,1e5),c=.027*(a>1e5?Math.min(a-1e5,4e5):0),d=.024*(a>5e5?a-5e5:0),e="2.9% + 30¢";if(a>1e5){var f=(b+c+d)/a;e=(100*f).toFixed(2)+"% + 30¢"}return $(".effective-rate-value").text(e),e};a(),$(".calculator form input").on("input",function(){a()})},international:function(){b(".benefit1","slide-up"),b(".benefit2","slide-up"),$(".intro-image").one("inview",function(a,b){b&&($(".animate-cad").addClass("bounce-down"),setTimeout(function(){$(".animate-eur").addClass("bounce-down"),setTimeout(function(){$(".animate-brl").addClass("bounce-down")},200)},200))}),$(".forex .view-all, .forex .close").click(function(a){a.preventDefault(),$(".currency-list").slideToggle(200),$(".view-all").toggleClass("open")})},pushToCard:function(){var a={},c=0,d=0,e=function(b){d++;var e=0,f=0;_.each(b,function(b){_.each(b.labels,function(c){if("push to card"===c.name){var d=b.html_url.split("/")[4];_.has(a,d)||(a[d]={}),_.has(a[d],"issues")||(a[d].issues={}),_.has(a[d].issues,b.title)||(a[d].issues[b.title]={}),"open"===b.state?e++:f++;var g=moment(new Date(b.created_at)).fromNow();a[d].issues[b.title]={title:b.title,html_url:b.html_url,author:b.user.login,created_at:g,status:b.state},a[d].repo_name=d,a[d].open_count=e,a[d].closed_count=f}})}),d===c&&($(".loading").fadeOut(200),a=_.sortBy(a,function(a){return-(a.open_count+a.closed_count)}),_.each(a,function(a){var b=$(".github table.items tr.repo-template").clone().removeClass("repo-template");b.find(".repo-name span").text(a.repo_name),b.find(".completed span").text(a.closed_count),b.find(".remaining span").text(a.open_count),b.attr("data-repo",a.repo_name),b.appendTo("tbody").fadeIn(300),$("tbody").append('<tr class="issues" data-repo="'+a.repo_name+'"><td colspan="3"></td></tr>'),_.each(a.issues,function(b){var c=$(".github table.items div.issue-template").clone().removeClass("issue-template");c.find("a.issue-name").attr("href",b.html_url),c.find("a.issue-name").text(b.title),c.find(".author").text(b.author),c.find(".created-at").text(b.created_at),c.find(".status").text(b.status),c.find(".status").addClass(b.status),$('tbody tr.issues[data-repo="'+a.repo_name+'"] td').append(c)})}),$(".issue-name").each(function(){$(this).width()>400&&$(this).css({width:"60%",display:"inline-block","float":"left",marginRight:0})}))};$.ajax({url:"https://api.github.com/orgs/balanced/repos?client_id=bda58293b5d9ede74ab7&client_secret=62cfb784097a180bcb5169d9528a23538340ecf0",dataType:"json",success:function(a){for(var b=a.sort(function(a,b){return b.watchers_count-a.watchers_count}),d=0,f=b.length;f>d;d++)if(!b[d].fork){c+=1;var g=b[d].issues_url.split("{")[0];$.ajax({url:g+"?labels=push+to+card&state=all&client_id=bda58293b5d9ede74ab7&client_secret=62cfb784097a180bcb5169d9528a23538340ecf0",dataType:"json",timeout:5e3,cache:!1,success:e})}}}),b(".benefit","slide-up"),$(".intro-image").one("inview",function(){$(".title-wrapper").animate({opacity:1},1e3),$(".mp-icon, .card-in-hand-icon").addClass("slide-in"),setTimeout(function(){$(".mp-icon, .card-in-hand-icon").removeClass("slide-in"),$(".money.first, .money.second, .money.third").addClass("slide-down-right")},600)}),$(".github").click(".repo",function(a){var b=$(a.target).parent();b.toggleClass("expanded");var c=$('.issues[data-repo="'+b.attr("data-repo")+'"]');c.hasClass("expanded")?c.find("div").slideUp(200,function(){c.removeClass("expanded")}):(c.addClass("expanded"),c.find("div").slideDown(200))});var f=!1;$(".show-all").click(function(a){a.preventDefault(),f?($(".issues td div").slideUp(200,function(){$(".repo, .issues").removeClass("expanded")}),$(a.currentTarget).text("Show all issues")):($(".repo, .issues").addClass("expanded"),$(".issues td div").slideDown(200),$(a.currentTarget).text("Hide all issues")),f=!f})}}}(window),$(balanced.menu);